# Identity and Access Management (IAM)
- IAM is what allows additional identities to be created within an AWS account - identities which can be given restricted levels of access.
- IAM identities start with no permissions on an AWS Account, but can be granted permissions (almost) up to those held by the Account Root User.

### 3 major identity components of IAM
- **USER**
  - identity who requiring AWS access, like humans, applications or service accounts
- **GROUP** 
  - You can add IAM users to groups, and add permissions to Groups 
  - **exam imp** -- have no credentials to login with.
  - they just used to make management of IAM user easier.
  - **exam imp** -- An IAM User can be a member of multiple IAM groups.
  - **exam imp** -- no group nesting, meaning you can't have ghroups within groups
  - by default, there is 300 groups limit per account but this can be increased by support ticket
  - **exam imp** -- Groups are NOT real identities ... can't be used from resource policies. meaning, they can't be referenced as a principle in a policy. They don't have any ARN.
- **ROLE**
  - generally used to give permissions to unknown number or multiple principles (user, group, account, services), not just one. we use IAM users in-case of just one principle.
  - IAM roles are created usually to give permissions for short period of time
  - Roles can also be referenced with-in policy, using ARN
  - when you assume a role, temp cred is generated by AWS service called STS (secure token service)
    - sts:AssumeRole
  - role can have 2 type of policies
    - Trust policies - which identity can assume that role
    - Permissions policies - Allow and/or deny permissions
  - **When to use IAM Roles**
    - when some AWS service/resource need access to perform some operation, example lambda function
    - in can of some emergency role, and get some permission
    - SSO for enterprise
    - web/Mobile app (web identity federation - eg. google, facebook, amazon)
    - **exam imp** -- this is the perfect example, if we want to have more than 5000 users in our app, we should use web identity federation based roles solution, it give more security and less maintainance of users.
    - Cross account access (create role as and when access is needed)
- **POLICIES** 
  - allow or deny access to AWS
  - two type -- Inline policies and managed policies

### Major features of IAM
- Manages Identity - a ID provider (IDP)
- Authenticate - prove you are who you claim you to be
- Authorize - Allow or deny access to resources

### Other imp points
- IAM is free
- global service / global resilience
- allow or deny its identities on its AWS account
- No direct control on external accounts or users
- identity federation (google, facebook, amazon)
- MFA


### IAM Access Keys
- Access keys are how the AWS Command Line Tools (CLI Tools) interact with AWS accounts.
- At any given time, one user can have only 2 set of access key at max. It can be either active or inactive, doesn't matter.
- aws CLI setup link -- https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2-mac.html

### IAM Identity Policies
- Identity Policies are attached to AWS identities and either ALLOW or DENY access to AWS resources.
- below are few points that are in sequence of priority
  - 1. Explicit DENY
  - 2. Explicit ALLOW
  - 3. Dfault DENY (Implicit)

### ARN (Amazon Resource Name)
- Uniquely identify resources within any AWS accounts
- arn:aws:s3:::catgifs --> refers to the bucket and not the objects in the bucket
- arn:aws:s3:::catgifs/* --> refers to the objects in the bucket, but not the bucket itself.

### Exam Imp
- 5000 IAM Users per account
- IAM User can be a member of 10 groups
- This has systems design impacts
- internet-scale applications
- large orgs & org merges
- IAM roles & Identity Federation fix this (more later)



